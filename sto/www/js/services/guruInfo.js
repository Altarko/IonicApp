/**
 * ?????? ? ???????? ???? ? ??????????\??????????? ??????????? ??????????
 */

angular
    .module('STO')
    .factory('guruinfo', guruinfo);

guruinfo.$inject = ['$q'];

/* @ngInject */
function guruinfo($q) {

    var guruInfo = {
        auto: {},               // выбранный пользователем автомобиль
        results: {},
        millage: 0
    };

    var service = {
        setUserAuto: setUserAuto,
        getUserAuto: getUserAuto,

        setUserMillage: setUserMillage,

        setUserDefectType: setUserDefectType,
        getUserDefectType: getUserDefectType,

        setGuruResult: setGuruResult,
        getGuruResult: getGuruResult

    };

    return service;

    ////////////////

    /**
     * ????????? ????????? ???????????? ??????????
     */
    function setUserAuto(auto) {
        guruInfo.auto = auto;
    }

    /**
     * ?????????? ????????? ????????????? ??????????
     */
    function getUserAuto() {
        return $q.when(guruInfo.auto);
    }

    /**
     * ????????? ????????? ????????????? ??? ?????????????
     * @param type
     */
    function setUserDefectType(type) {
        guruInfo.defectType = type;
    }

    /**
     * ?????????? ????????? ????????????? ??? ?????????????
     * @returns {Promise}
     */
    function getUserDefectType() {
       return $q.when(guruInfo.defectType);
    }

    function setGuruResult(results) {
        guruInfo.results = results;
    }

    function getGuruResult() {
        return $q.when(guruInfo.results);
    }

    function setUserMillage(millage) {
        guruInfo.millage = millage;
    }
}
