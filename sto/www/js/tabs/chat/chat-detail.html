<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="Чат с {{chat.name}}" ng-controller="ChatCtrl as vm">
  <!--<ion-content class="padding">
    <img ng-src="{{chat.face}}" style="width: 64px; height: 64px">
    <p>
      {{chat.lastText}}
    </p>
  </ion-content>-->
  <ion-content class="content-stable"
               on-swipe-left="vm.hideTime = false"
               on-swipe-right="vm.hideTime = true">

    <div ng-repeat="message in vm.messages"
         ng-class="{other: message.userId != vm.myId}"
         class="messages">

      <div class="message" ng-class="{'slide-right': vm.hideTime, '': !vm.hideTime}">
        <span>
          {{ message.text }}
          <p class="time" ng-class="{'slide-right': vm.hideTime, '': !vm.hideTime}">
            {{message.time}}
          </p>
        </span>

      </div>

     <!-- <div class="time" ng-class="{'slide-right': vm.hideTime, '': !vm.hideTime}">{{message.time}}</div>-->


    </div>

  </ion-content>

  <ion-footer-bar keyboard-attach class="bar-stable item-input-inset">
    <label class="item-input-wrapper">
      <input type="text" placeholder="Ваше сообщение" on-return="sendMessage(); closeKeyboard()" ng-model="vm.data.message" on-focus="vm.inputUp()" on-blur="vm.inputDown()" />
    </label>
    <button class="button button-clear" ng-click="vm.sendMessage()">
      Отправить
    </button>
  </ion-footer-bar>
  </ion-pane>

</ion-view>
